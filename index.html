<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>陳宏麟診所｜身高估算計算器</title>
  <link rel="icon" href="favicon.ico">
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#2F5579">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="陳宏麟診所">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <style>
    body{margin:0;font-family:"Noto Sans TC","微軟正黑體",Arial,sans-serif;background:#fffaf5;}
    header{display:flex;align-items:center;gap:12px;padding:14px 16px;background:#fff;box-shadow:0 2px 8px rgba(0,0,0,.05);}
    header img{width:40px;height:40px;object-fit:contain;border-radius:8px;border:1px solid #eef0f3;background:#fff;}
    .ttl{display:flex;flex-direction:column;}
    .ttl .main{font-weight:800;color:#2F5579;line-height:1.15;}
    .ttl .sub{font-size:12px;color:#4f6b86;opacity:.8;letter-spacing:.5px;}
    main{max-width:640px;margin:0 auto;padding:16px;}
    .card{background:#fff;border-radius:12px;padding:16px;box-shadow:0 4px 12px rgba(0,0,0,.06);margin-bottom:20px;}
    label{display:block;margin-top:10px;}
    select,input{width:100%;padding:10px;border-radius:8px;border:1px solid #ddd;}
    .tabs{display:flex;margin-bottom:12px;}
    .tabs button{flex:1;padding:10px;border:none;border-radius:8px;background:#eee;cursor:pointer;}
    .tabs button.active{background:#2F5579;color:#fff;}
    .result{margin-top:20px;padding:16px;background:#9AC43C;color:#123;border-radius:12px;font-weight:bold;text-align:center;}
    footer{text-align:center;font-size:12px;color:#555;margin-top:20px;}
  </style>
</head>
<body>
  <header>
    <img src="icons/icon-192.png" alt="Clinic logo">
    <div class="ttl">
      <div class="main">陳宏麟診所｜身高估算計算器</div>
      <div class="sub">SAMUEL CHEN CLINIC</div>
    </div>
  </header>
  <main>
    <div class="card">
      <div class="tabs">
        <button id="btn-knee" class="active">膝長法</button>
        <button id="btn-demi">半臂展法</button>
      </div>
      <label>性別</label>
      <select id="gender">
        <option value="M">男性</option>
        <option value="F">女性</option>
      </select>
      <div id="knee-group">
        <label>年齡（歲）</label><input id="age" type="number">
        <label>膝長 KH（cm）</label><input id="knee" type="number">
      </div>
      <div id="demi-group" style="display:none;">
        <label>半臂展（cm）</label><input id="demispan" type="number">
      </div>
    </div>
    <div id="out" class="result">輸入數值以顯示估算身高</div>
    <footer>© 陳宏麟診所　公式：Knee height / Demispan 臨床估算式</footer>
  </main>
<script>
const btnKnee=document.getElementById('btn-knee');
const btnDemi=document.getElementById('btn-demi');
const kneeGroup=document.getElementById('knee-group');
const demiGroup=document.getElementById('demi-group');
const out=document.getElementById('out');

btnKnee.addEventListener('click',()=>{btnKnee.classList.add('active');btnDemi.classList.remove('active');kneeGroup.style.display='block';demiGroup.style.display='none';calc();});
btnDemi.addEventListener('click',()=>{btnDemi.classList.add('active');btnKnee.classList.remove('active');demiGroup.style.display='block';kneeGroup.style.display='none';calc();});

['gender','age','knee','demispan'].forEach(id=>{const el=document.getElementById(id);if(el) el.addEventListener('input',calc);});

function num(v){const n=parseFloat(v);return isNaN(n)?null:n;}
function calc(){
  const g=document.getElementById('gender').value;
  const age=num(document.getElementById('age')?.value);
  const knee=num(document.getElementById('knee')?.value);
  const demi=num(document.getElementById('demispan')?.value);
  const isKnee=kneeGroup.style.display!=='none';
  let h=null;
  if(isKnee){if(age!=null&&knee!=null){h=(g==='M')?(64.19-0.04*age+2.02*knee):(84.88-0.24*age+1.83*knee);}}
  else{if(demi!=null){h=(g==='M')?(1.40*demi+57.8):(1.35*demi+60.1);}}
  out.textContent=(h==null)?"輸入數值以顯示估算身高":"估算身高：約 "+h.toFixed(1)+" cm";
}
calc();
</script>
</body>
</html>